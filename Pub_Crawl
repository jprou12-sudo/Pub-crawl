<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>J+J Pub Golf Scorecard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --primary: #0b3d91;
      --text-main: #102027;
      --text-muted: #607d8b;
      --border: #cfd8dc;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text-main);
      padding: 12px;
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 12px;
    }

    header h1 {
      font-size: 1.4rem;
      color: var(--primary);
      margin-bottom: 4px;
    }

    header h2 {
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      padding: 10px 12px;
      margin-bottom: 12px;
      border: 1px solid var(--border);
    }

    /* Leaderboard */
    .leader-header {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 6px;
    }

    .leader-body {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      gap: 16px;
    }

    .leader-row {
      flex: 1;
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      padding: 4px 6px;
      border-radius: 8px;
      background: #eef4fa;
    }

    .leader-row span.name {
      font-weight: 600;
    }

    .leader-status {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-align: center;
    }

    .leader-status span.winner {
      font-weight: 600;
      color: var(--primary);
    }

    /* Player cards */
    .player-card {
      margin-top: 6px;
    }

    .player-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }

    .player-header h3 {
      font-size: 1rem;
      color: var(--primary);
    }

    .player-summary {
      font-size: 0.8rem;
      text-align: right;
    }

    .player-summary .label {
      font-weight: 600;
      color: var(--text-muted);
      margin-right: 4px;
    }

    .badge {
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      border: 1px solid var(--border);
      background: #e3f2fd;
      color: var(--primary);
      text-align: center;
      min-width: 90px;
    }
    .badge.over {
      background: #ffebee;
      color: #c62828;
      border-color: #ffcdd2;
    }
    .badge.under {
      background: #e8f5e9;
      color: #2e7d32;
      border-color: #c8e6c9;
    }

    .holes-header {
      display: grid;
      grid-template-columns: 0.5fr 1.4fr 1.1fr 0.5fr 0.7fr 0.8fr;
      font-size: 0.7rem;
      text-transform: uppercase;
      color: var(--text-muted);
      border-bottom: 1px solid var(--border);
      padding-bottom: 4px;
      margin-bottom: 4px;
    }

    .hole-row {
      display: grid;
      grid-template-columns: 0.5fr 1.4fr 1.1fr 0.5fr 0.7fr 0.8fr;
      align-items: center;
      gap: 4px;
      padding: 5px 0;
      border-bottom: 1px dashed rgba(207,216,220,0.6);
    }

    .hole-row:last-child {
      border-bottom: none;
    }

    .hole-number {
      font-weight: 600;
      color: var(--primary);
      font-size: 0.85rem;
    }

    .venue {
      font-size: 0.8rem;
      font-weight: 600;
    }

    .drink {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .par {
      font-size: 0.85rem;
      font-weight: 600;
      text-align: center;
    }

    .score-input,
    .penalty-input {
      width: 100%;
      padding: 4px 6px;
      font-size: 0.8rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      text-align: center;
      outline: none;
    }

    .score-input:focus,
    .penalty-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(11,61,145,0.18);
    }

    .btn-row {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
    }

    .clear-btn {
      border-radius: 999px;
      border: 1px solid #c62828;
      padding: 6px 12px;
      font-size: 0.75rem;
      color: #c62828;
      background: #ffebee;
      cursor: pointer;
    }

    .clear-btn:active {
      transform: scale(0.97);
    }

    .penalties p {
      font-size: 0.8rem;
      margin-bottom: 2px;
    }

    .penalties b {
      color: var(--primary);
    }

    footer {
      text-align: center;
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 6px;
    }

    /* Stylised map */
    .map-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 4px;
    }

    .map-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .map-list {
      list-style: none;
      position: relative;
      margin-left: 8px;
      padding-left: 18px;
    }

    .map-list::before {
      content: "";
      position: absolute;
      left: 8px;
      top: 4px;
      bottom: 4px;
      width: 2px;
      background: linear-gradient(to bottom, #cfd8dc, #90a4ae);
    }

    .map-item {
      position: relative;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
    }

    .map-item:last-child {
      margin-bottom: 0;
    }

    .map-hole {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: var(--primary);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      flex-shrink: 0;
    }

    .map-venue {
      font-weight: 600;
    }

    .map-area {
      font-size: 0.7rem;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>J+J Championship 2025</h1>
      <h2>Pub Golf Mobile Scorecard</h2>
    </header>

    <!-- Leaderboard -->
    <section class="card" id="leaderCard">
      <div class="leader-header">James vs Jack — Leaderboard</div>
      <div class="leader-body">
        <div class="leader-row">
          <span class="name">James</span>
          <span id="lb-james">0</span>
        </div>
        <div class="leader-row">
          <span class="name">Jack</span>
          <span id="lb-jack">0</span>
        </div>
      </div>
      <div class="leader-status" id="leaderStatus">No scores yet</div>
    </section>

    <!-- Stylised route map -->
    <section class="card">
      <div class="map-title">Pub Crawl Route</div>
      <div class="map-subtitle">Paddington → City → Valley</div>
      <ul class="map-list">
        <li class="map-item">
          <span class="map-hole">1</span>
          <div>
            <div class="map-venue">The Paddo</div>
            <div class="map-area">Paddington</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">2</span>
          <div>
            <div class="map-venue">The Caxton Hotel</div>
            <div class="map-area">Milton / Stadium precinct</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">3</span>
          <div>
            <div class="map-venue">The Lord Alfred</div>
            <div class="map-area">Caxton Street</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">4</span>
          <div>
            <div class="map-venue">Brew</div>
            <div class="map-area">Burnett Lane, CBD</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">5</span>
          <div>
            <div class="map-venue">Embassy Hotel</div>
            <div class="map-area">CBD</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">6</span>
          <div>
            <div class="map-venue">Guilhooleys</div>
            <div class="map-area">Near transit centre</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">7</span>
          <div>
            <div class="map-venue">The Gresham</div>
            <div class="map-area">CBD</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">8</span>
          <div>
            <div class="map-venue">Brooklyn Standard</div>
            <div class="map-area">Eagle Lane</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">9</span>
          <div>
            <div class="map-venue">Prince Consort</div>
            <div class="map-area">Fortitude Valley</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">10</span>
          <div>
            <div class="map-venue">Rics Backyard</div>
            <div class="map-area">Valley Mall</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">11</span>
          <div>
            <div class="map-venue">The Wickham</div>
            <div class="map-area">Wickham Street</div>
          </div>
        </li>
        <li class="map-item">
          <span class="map-hole">12</span>
          <div>
            <div class="map-venue">Jubilee</div>
            <div class="map-area">Fortitude Valley</div>
          </div>
        </li>
      </ul>
    </section>

    <!-- Player scorecards will be injected here -->
    <div id="playersContainer"></div>

    <section class="card">
      <div class="penalties">
        <p><b>Penalties</b></p>
        <p>+2 — Water hazard (taking a piss)</p>
        <p>+3 — Spilling a drink</p>
        <p>+4 — Vomiting</p>
        <p>+6 — Not allowed in / refused service / kicked out</p>
      </div>
    </section>

    <footer>
      May your par stay low and your spirits high.
    </footer>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const holes = [
        ["1", "The Paddo", "XXXX Jug", 1],
        ["2", "The Caxton Hotel", "White Wine 1/2 Bottle", 2],
        ["3", "The Lord Alfred", "Aperol Spritz x 2", 2],
        ["4", "Brew", "Long Island", 3],
        ["5", "Embassy Hotel", "Pint", 1],
        ["6", "Guilhooleys", "Guinness Pint", 2],
        ["7", "The Gresham", "Tequila Shots x 2", 2],
        ["8", "Brooklyn Standard", "Skinny Bitches", 1],
        ["9", "Prince Consort", "Cruiser", 1],
        ["10", "Rics Backyard", "Tequila Applejuice", 1],
        ["11", "The Wickham", "Cocktail", 2],
        ["12", "Jubilee", "Frankies Pint", -3]
      ];

      const COURSE_PAR = holes.reduce((sum, h) => sum + h[3], 0);

      const players = [
        { name: "James", slug: "james" },
        { name: "Jack", slug: "jack" }
      ];

      const playersContainer = document.getElementById("playersContainer");
      const leaderJamesEl = document.getElementById("lb-james");
      const leaderJackEl = document.getElementById("lb-jack");
      const leaderStatusEl = document.getElementById("leaderStatus");

      const totals = { james: 0, jack: 0 };

      // Build cards for each player
      players.forEach(player => {
        const slug = player.slug;
        const section = document.createElement("section");
        section.className = "card player-card";
        section.innerHTML = `
          <div class="player-header">
            <div>
              <h3>${player.name}'s Scorecard</h3>
              <div class="player-summary">
                <div><span class="label">Total:</span> <span id="total-${slug}">0</span></div>
                <div><span class="label">Par:</span> <span>${COURSE_PAR}</span></div>
              </div>
            </div>
            <div id="badge-${slug}" class="badge">No scores yet</div>
          </div>

          <div class="holes-header">
            <div>#</div>
            <div>Venue</div>
            <div>Drink</div>
            <div>Par</div>
            <div>Score</div>
            <div>Penalty</div>
          </div>

          <div class="hole-rows" data-player="${slug}"></div>

          <div class="btn-row">
            <button type="button" class="clear-btn" data-clear="${slug}">Clear ${player.name}</button>
          </div>
        `;
        playersContainer.appendChild(section);

        const rowsContainer = section.querySelector(".hole-rows");

        // Create rows for each hole
        holes.forEach(hole => {
          const [num, venue, drink, par] = hole;
          const row = document.createElement("div");
          row.className = "hole-row";
          row.innerHTML = `
            <div class="hole-number">${num}</div>
            <div class="venue">${venue}</div>
            <div class="drink">${drink}</div>
            <div class="par">${par}</div>
            <div>
              <input
                type="number"
                min="0"
                inputmode="numeric"
                class="score-input"
                data-player="${slug}"
                data-hole="${num}"
              />
            </div>
            <div>
              <input
                type="number"
                min="0"
                inputmode="numeric"
                class="penalty-input"
                data-player="${slug}"
                data-hole="${num}"
              />
            </div>
          `;
          rowsContainer.appendChild(row);
        });
      });

      function getInputsForPlayer(slug) {
        const scoreInputs = document.querySelectorAll(
          '.score-input[data-player="' + slug + '"]'
        );
        const penaltyInputs = document.querySelectorAll(
          '.penalty-input[data-player="' + slug + '"]'
        );
        return { scoreInputs, penaltyInputs };
      }

      function updatePlayer(slug) {
        const { scoreInputs, penaltyInputs } = getInputsForPlayer(slug);
        let total = 0;
        let any = false;

        scoreInputs.forEach(input => {
          const val = parseInt(input.value, 10);
          if (!isNaN(val)) {
            total += val;
            any = true;
          }
        });

        penaltyInputs.forEach(input => {
          const val = parseInt(input.value, 10);
          if (!isNaN(val)) {
            total += val;
            any = true;
          }
        });

        totals[slug] = any ? total : 0;

        const totalEl = document.getElementById("total-" + slug);
        const badgeEl = document.getElementById("badge-" + slug);

        totalEl.textContent = any ? total : 0;

        if (!any) {
          badgeEl.textContent = "No scores yet";
          badgeEl.className = "badge";
        } else {
          const diff = total - COURSE_PAR;
          if (diff === 0) {
            badgeEl.textContent = "Even par (E)";
            badgeEl.className = "badge";
          } else if (diff > 0) {
            badgeEl.textContent = diff + " over par (+" + diff + ")";
            badgeEl.className = "badge over";
          } else {
            const under = Math.abs(diff);
            badgeEl.textContent = under + " under par (-" + under + ")";
            badgeEl.className = "badge under";
          }
        }

        updateLeaderboard();
      }

      function updateLeaderboard() {
        const jamesTotal = totals.james;
        const jackTotal = totals.jack;

        leaderJamesEl.textContent = jamesTotal;
        leaderJackEl.textContent = jackTotal;

        const jamesHas = jamesTotal > 0;
        const jackHas = jackTotal > 0;

        if (!jamesHas && !jackHas) {
          leaderStatusEl.textContent = "No scores yet";
          return;
        }

        if (jamesHas && !jackHas) {
          leaderStatusEl.innerHTML = '<span class="winner">James</span> is in the lead (Jack hasn\'t started yet)';
          return;
        }

        if (!jamesHas && jackHas) {
          leaderStatusEl.innerHTML = '<span class="winner">Jack</span> is in the lead (James hasn\'t started yet)';
          return;
        }

        if (jamesTotal === jackTotal) {
          leaderStatusEl.textContent = "All square – dead even";
        } else if (jamesTotal < jackTotal) {
          leaderStatusEl.innerHTML = '<span class="winner">James</span> is leading by ' + (jackTotal - jamesTotal) + " strokes";
        } else {
          leaderStatusEl.innerHTML = '<span class="winner">Jack</span> is leading by ' + (jamesTotal - jackTotal) + " strokes";
        }
      }

      function attachListeners() {
        players.forEach(player => {
          const slug = player.slug;
          const { scoreInputs, penaltyInputs } = getInputsForPlayer(slug);
          const clearBtn = document.querySelector('[data-clear="' + slug + '"]');

          scoreInputs.forEach(input => {
            input.addEventListener("input", () => updatePlayer(slug));
          });

          penaltyInputs.forEach(input => {
            input.addEventListener("input", () => updatePlayer(slug));
          });

          clearBtn.addEventListener("click", () => {
            if (!confirm("Clear all scores and penalties for " + player.name + "?")) return;
            scoreInputs.forEach(i => (i.value = ""));
            penaltyInputs.forEach(i => (i.value = ""));
            updatePlayer(slug);
          });

          // Initial calc per player
          updatePlayer(slug);
        });
      }

      attachListeners();
    });
  </script>
</body>
</html>
